# Raftの解説

Core raftとメンバ構成変更に分けて説明する。

## その前に先に念頭に入れておくべきこと
CAP schemaでいうところのC(onsistency)とP(artial torelance)重視なので
A(vailability)が欠けてしまう。

システムと切り離された外部からは応答不能状態、すなわち
システムが「全く動いていない」（実際は内部で忙しくしていても）
ように見えることがある。

## Core Raft
計算は2つの要素から構成される:
1. Leaderを選出すること
2. LeaderからReplicaにデータを送りつけること。

MultiPaxosと似ていないというのは難しいので、
仕方なく似ていると言うことにするが、
ReplicaからLeaderにデータを送りつけることがない決定的な違いある。

したがって、過半数票を集まれば乗っ取れるMultiPaxosとは違い、
Leaderは「過半数表を得る」ことに加えて「資質」を満たしている必要がある。

資質とは、最後のtermに本質的に参加していた過半数いるはずのメンバーであること。
過半数のうちで最もデータを蓄えているものである必要はない。
従ってある種のRoll Backが起こっている可能性があるが、
これはcommitしていないからと思うことにすれば問題ない。

## メンバ構成変更
ただし、資質を満たす上ではメンバ構成変更について注意する必要がある。
裏で勝手にメンバが増えてしまった場合には、資質が絶対に満たされなくなるからである。


# RaftLogは何を実装しているか
* Core raft
* メンバ構成変更

オリジナルの論文にない工夫について。